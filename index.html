<!doctype html>
<html lang='en'>
    <head>
        <meta charset='utf-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1'>

        <title>Aiden Storey</title>

        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
                font-size: calc(10px + 0.33vw);
                -webkit-font-smoothing: antialiased;
                padding:1vh 6vw;
                color:#333;
                overflow: hidden;
            }

            h1 {
                font-size: 4.5em;
                font-weight: 500;
                margin-bottom: 0;
            }

            p {
                font-size: 1.6em;
                font-weight: 300;
                line-height: 1.4;
                max-width: 26em;
            }

            img {
                filter: brightness(0%);
                width: 1.4rem;
                z-index: 1;
                padding-right: 1.5rem;
            }
        </style>
    </head>
    <body>
        <h1>Kia ora!</h1>
        <p style='font-weight:500;font-size:2.2em'>My name is Aiden Storey.</p>
        <p>Originally from New Zealand, I am a Software Developer based in Ontario, Canada.</p>
        <p>Over the years I have done everything from game development to web development. I live to learn and always strive to apply this to all aspects of my life.</p>
        <a id='g' href='https://github.com/aidenstorey' target='_blank' rel='noreferrer'><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAEpElEQVRoBe2ZS6iVVRTHNcuwEh/XRw8jyOdMUNMcebOBDTQLB0kSKT6ugg59DGwQOBGxq4IEjZsGBb0GhTdBS6KIqCQitQTfV8t39LDf/3LWYd99vv0453zfPRIt+LP3Xo//Wut859t7n3uHDfuPyPAS+3gErm6wEMwET4Iu8BCQXAf94AQ4Do6BQ+Ac6Lio0M3gS3CnRShWHOPBkMsUMu4DN0CrDfhxemK94DFQuYwkw3ZQZgN+Q9fg3wbuA5WIvvdfAz9xVWvlml52Jysg1CdVVdEh3t/J+WJZzfRA9FcHmrDmlHtDu81s6mAD1oiNqqUleYGoTj4Ja8BG1fJ8s53oxQ69E9qxbgFLUPYobm3FRbxX0c8AWaJt7xtQRCTdUzWWeYx7wAUQ8s3Vn4djN5gDJAtAKFa7WdbWvCNCoqJ90RXkNXATWPIzzI+CD8DbNWgunWzmp5id4EHgiq5Ous6Ynz9udZ2L5lNQ3ogQHCkKqummMi4H4kiJfOSrmJCoab8BW+tr/3AoUHpdO8y5aHw/Flyy7aNELW+E8k3AEHsaaqwvFFyBXrmKPkzTaUPoKsq7JREoAr2UZV79i+qQTjmUy4oOjbo1N0jOVfwsUaMbIstXKId+p4QaMP0Xfmq9OGYMjf/g0+0HVrheDLdyhuqRXvZJoC4vM4sFyPZu3XvoJu9l1LVS5dxTq+np2hgbDsSMFdn2Z/Dq8KzLx8xiT+Q37FmnaZ2xnIlyaneK1fahUtkTmaZFRH7C9mfEXpVJOX9MkE+X3RpJ/fC/lCCr0pzKPc5txL/r+IXd7yuGcD0ykWvgOLAnMiLhrFO/U6KjISYDPVgjeqFiMjFmrNiW+hB1raq/IxcTxehTeTzhU4X5CUhTjegqU2/klBYJWZKwV2F+LoP0F/nYV+u7jIAVGT5lu+TkHFR7zhVFh9IzZVca4XsWW+wgNNtKl+NRFqkLmgK/BWPcwIrmyvEDsGJD49/4DLo0qp5jGYEi/BQ8AKoSnWl9IFS8q1fNDbIOjesUm3+P7/wGhvYV+t/KcRDL7drWFqUchbLfI3mH9RrwFrjl2fRYdc3WztLOya+8S4Euf+J0C43NdWQotlD2oHWDv2Jt/6+Yzfxnz26+OpQ+Ab1gLkiJnuZBcBjcBsbTzKhagzIZyxXgEp5nbcXNYn7ds7u+ajTn/ZHPrxEel7NofpnYhpcc3SDZyMoPPo1u4JbJqO+lb7f1Fmy5shVHi2t27MlJokPy84Iku5xgFayvk1uA3qEZjk9qqq+qG587P0qcHeSpHAMF6VehS36V9VgnUnegl8AGsByMBs1IF84uf85cNaV+BDbUsBjNH16yNxu82lPkFG8+qkU1tSSvEGVENu5F1852a4XcW8BtOfxRt45VFtjquJpA/8mcRPc6WAYWgCVgPWhGxuDsF1y0Vu5XmyGO+XZj1JZXlMjV5Wy9lienkX6cF1lAWeNMiLRjuIX7cxWXK6lGjkCknJWItr0ecAX4TWhdRiPi1k6YvcXi27JMJnI30J9q3IZ0c80V+bqxujHsA+IectGlTSd9Hwj+4wVbSHoxfAY2g9Tf1kIc/+vvyk/gX8TSRLEGUNVmAAAAAElFTkSuQmCC'/></a>
        <a id='l' href='https://www.linkedin.com/in/aidenstorey' target='_blank' rel='noreferrer'><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAClElEQVRYCe2ZvWtUQRTFXTEWiohGbASzaidWYhdRUWTBDf4FdiaFoJWIEbGySyNYqSj+H1YKWgniF1hYJFr4RUBFFBVc/Z1kN1xfZtw7TzN5T/bCyd45c9/ck7sz7828baxYbMNQ6xfTy8Z8IfM70AkpOAj5DPysIN6gaQI0wIIdwtN/UkXBVtOZBcU4Va2wFSz/KxhWuTWHZ0FdrLUSpWvrorarc0iia2f/tej3fB3nQAuMg0dgWW0r2Yur1LY/0L+toHA17dvAxuXy257pcQlx08DadxqnLZHT94h+GBH0GD74aI3E/zPaI7oZyTYC77k+cnl52pP0FMOH7uWT5dP+/ZX9FqIW2H2wD0j8TnAD5Fp4xTztVST32B6C7ngCc8R4pkcOHUk5PJX+yIi3AqPugNtt+Lv4r01b7hrQ7nLquwmeAvk6aGwHY+AASCpgvzmtW1vITkDa+dYTZ2M1dgdcBHogxWyUjmlgx4v5rodLLJGXP0/gBaAHUszu0XEEfIoFWD7pK7EXOv23xE05Y3UQueyJXWrR3xDxwyOkG3PdE+tZiJ5x+sVobh8HI+AluAJegaLNQAhNELUcoiX0AdhoVBzD3wX0eqBozyGaRdK2l3p6KNc4sILFaavbkhMw3Q7/aDlEH44o0FM2ZJ9DpOVyiN5kExp/g/GT3Byih5IUOYJziHbISAsZiE6rV/noQaXL1y7tykGl0+pVPrqWlfZsmLZQk6uBuuhUbu0kjaOW6PrFfUcvZD9OaNy9vYDYZ4MObRtfxAIqyI/VcnrUVrSORHWyjua0qq2N9+YaKNdrBR0g5kynCxFVx7V5ufN/VfGzQL/TVVG4Xvjo9qgXoL//bEtbpwwdg9aBqpgK+QTM9AT9AsSxapB7LW8iAAAAAElFTkSuQmCC'/></a>
        <a id='e' href='mailto:aiden@storey.dev'><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAACr0lEQVRYCe2XzYtOURzHHy+byShJXmowxWAjRRT/gWaUlB0rTd7Gih07k2xlyMtkIYqaWJiNvJQySbIQsVASIfLWzJi8ZPh8bveZruOkmbl3PM/ifuvznHt+59xzvvd3z7n3PpVKqTID9ZGB+djogX74VWP0cAmWQSLNfYBaGwvn/4inpin8nIFVUG9qwNCCSfwMQGO9uUv99GvQ1GZlrJb6w8/kiJO1kdj/Ci2PTRQuzp90OgYzYp0nKOZ6OwzfIfRTeRwJ2uk1bIaJ1nomeAahMesvnHwDdMEwxDr1Em+GojWPAS9CbE5jZ2EjVNpSOijfQeyEQeJ7YSrklet+N3yC2Fw+qPdD4ssd60FWPhN3wpxsMD1+QNkO9yJtowmtoNMpWBPp/JlYN9zKtvmgXpINcPwGroLZsi270+dS3wazoA++wWjUSKdD4EvBN1dWZtH5OuFptsFjM3geeuAHhGom0AFLwwbqr2APXI60ZUOu8aOwMBtMj59THocnaT1bmJhWDXoFTuZGeQSh7NMKW2Ba2Ej9CrimXgZtTdSPwKYgbtXMXwAvzsdaqMUEdkFL1aAdNHoDHDSmmQS3w7pIo5voAPj8dByzfhCmQyjX70l4Gzak9XZKE+LyS26xA2blLfmXVtO4A2ZHOt1PY260UH6dnIbbYUNQ946MyI0wVpmBh+Atb4PkSilVzJgJ6AXX+hcYk8Zj0Am+QjfcBG9nC8TkG8K1/dfujHWOxcZrsDqWBvaBa2YrNIDyAs6BmYttAsKjU16DzjIMrps74NpUJ+B9cpTzpwiDVQsa6qxWiiqzb4mixix0nNJg3nSWGSwzmDcDec/3a2YIqm+AvOMVff6Qm+Ru0aMWOF6fY62EAfCro57wz9MiSOTXyHXwc6jWJgfxcA1GzHFcqsxAzTLwG7lRHulUOGVbAAAAAElFTkSuQmCC'/></a>
        <img id='s' src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' />
        <script>
// ----------
// Constants
// ----------

const DIRECTIONAL_OFFSET = {
    'Up': { x: 0, y: -1 },
    'Down': { x: 0, y: 1 },
    'Left': { x: -1, y: 0 },
    'Right': { x: 1, y: 0 },
};

const INVERSE_DIRECTION = {
    'Up': 'Down',
    'Down': 'Up',
    'Left': 'Right',
    'Right': 'Left',
};

const ROTATIONAL_DIRECTION = {
    0: 'Up',
    1: 'Right',
    2: 'Down',
    3: 'Left',
};

const MOVEMENT_DISTANCE = 1.5;

const HALF_PI = Math.PI * 0.5;
const QUARTER_PI = Math.PI * 0.25;

const LISTENER_OPTIONS = { passive: false };


// ---------
// Elements
// ---------

const github = document.getElementById('g');
const linkedin = document.getElementById('l');
const email = document.getElementById('e');
const snake = document.getElementById('s');


// ----------
// Variables
// ----------

let resizeTaskId, updateTaskId;

let elementOriginX, elementOriginY;

let playingOriginX, playingOriginY;
let playingHeight, playingWidth;

let screenHeight, screenWidth;
let screenEM;

let snakeCollectables = [ github, linkedin, email ];
let snakeParts = [];
let snakeStart, snakeLast;

let snakeCurrentDirection, snakeNextDirection;

let touchX, touchY;


// --------
// Helpers
// --------

const changeDirection = (direction) => {
    if (snakeCurrentDirection !== direction && snakeCurrentDirection !== INVERSE_DIRECTION[direction]) {
        snakeNextDirection = direction;
    }
}

const elementMove = (element, x, y) => {
    element.style.position = 'fixed';
    element.style.left = `${x}px`;
    element.style.top = `${y}px`;
    element.style.paddingRight= '0';
};

const elementReset = (element) => {
    element.style.position = 'static';
    element.style.paddingRight = `${MOVEMENT_DISTANCE}em`
};

const snakeAdd = (count = 1) => {
    for (let c = 0; c < count; ++c) {
        let element
        if (snakeParts.length === 0) {
            element = snake.cloneNode();
            snakeParts.push(element);
        } else {
            element = snakeParts[snakeLast].cloneNode();
            snakeParts.splice(snakeLast + 1, 0, element);
            snakeLast += 1;
        }
        document.body.appendChild(element);
        element.style.background = '#333';
    }
};

const snakeCheckCollision = () => {
    const head = snakeParts[snakeStart];

    if (head.offsetLeft < playingOriginX || head.offsetLeft > playingOriginX + playingWidth ||
        head.offsetTop < playingOriginY || head.offsetTop > playingOriginY + playingHeight) {
            return true;
        }

    for (let i = 3; i < snakeParts.length; ++i) {
        const part = snakeParts[(snakeStart + i) % snakeParts.length];
        if (head.offsetLeft === part.offsetLeft && head.offsetTop === part.offsetTop) {
            return true;
        }
    }

    return false;
};

const snakeKill = () => {
    clearTimeout(updateTaskId);
    updateTaskId = null;

    for (let i = 0; i < 6; ++i) {
        setTimeout(() => {
            snakeShow(i % 2);
        }, i * 200);
    }

    setTimeout(() => {
        destroy();
        initialize();
    }, 1200);
}

const snakeShow = (show = true) => {
    const background = show ? '#333' : null;

    for (const part of snakeParts) {
        part.style.background = background;
    }
};


// ----------
// Listeners
// ----------

addEventListener('keydown', (event) => {
    if (event.key.startsWith('Arrow')) {
        changeDirection(event.key.substr(5));
        event.preventDefault();
    }
});

// TODO: swipe listener

addEventListener('resize', () => {
    if (resizeTaskId !== null) {
        clearTimeout(resizeTaskId);
    } else {
        destroy();
    }

    resizeTaskId = setTimeout(() => {
        resizeTaskId = null;
        initialize();
    }, 500);
});

addEventListener('touchstart', (event) => {
    if (touchX || touchY) {
        return;
    }

    touchX = event.touches[0].clientX;
    touchY = event.touches[0].clientY;
}, LISTENER_OPTIONS);

addEventListener('touchmove', (event) => {
    event.preventDefault();
}, LISTENER_OPTIONS);

addEventListener('touchend', (event) => {
    const dx = event.changedTouches[0].clientX - touchX;
    const dy = event.changedTouches[0].clientY - touchY;
    touchX = touchY = null;

    if (dx === 0 && dy === 0) {
        return;
    }

    let sector = Math.floor((Math.acos(-dy / Math.sqrt(dx * dx + dy * dy)) + QUARTER_PI) / HALF_PI);
    if (sector === 1 && dx < 0) {
        sector = 3;
    }

    changeDirection(ROTATIONAL_DIRECTION[sector]);
}, LISTENER_OPTIONS);

addEventListener('mousedown', (event) => {
    const head = snakeParts[snakeStart];
    const dx = event.clientX - head.offsetLeft;
    const dy = event.clientY - head.offsetTop;

    let sector = Math.floor((Math.acos(-dy / Math.sqrt(dx * dx + dy * dy)) + QUARTER_PI) / HALF_PI);
    if (sector === 1 && dx < 0) {
        sector = 3;
    }

    changeDirection(ROTATIONAL_DIRECTION[sector]);
});


// -----
// Game
// -----

const initialize = () => {
    resizeTaskId = updateTaskId = null;

    elementOriginX = github.offsetLeft;
    elementOriginY = github.offsetTop;

    snake.style.position = 'fixed';
    snake.style.left = '1rem';
    screenEM = snake.offsetLeft * MOVEMENT_DISTANCE;

    screenHeight = document.documentElement.clientHeight;
    screenWidth = document.documentElement.clientWidth;

    playingOriginX = elementOriginX - Math.floor(elementOriginX / screenEM) * screenEM;
    playingOriginY = elementOriginY - Math.floor(elementOriginY / screenEM) * screenEM;
    playingHeight = Math.floor((screenHeight - playingOriginY) / screenEM) * screenEM - screenEM;
    playingWidth = Math.floor((screenWidth - playingOriginX) / screenEM) * screenEM - screenEM;

    for (let i = 0; i < snakeCollectables.length; ++i) {
        elementMove(snakeCollectables[i], elementOriginX + screenEM * i * 2, elementOriginY);
    }
    elementMove(snake, elementOriginX + screenEM * 6, elementOriginY);

    snakeCurrentDirection = snakeNextDirection = 'Right';
    snakeStart = snakeLast = 0;

    snakeAdd(3);

    requestAnimationFrame(updateLoop);
};

const destroy = () => {
    for (const part of snakeParts) {
        document.body.removeChild(part);
    }
    snakeParts.length = 0;

    for (const collectable of snakeCollectables) {
        elementReset(collectable);
    }
    elementReset(snake);

    clearTimeout(updateTaskId);
    updateTaskId = null;
};

const updateLoop = () => {
    if (snakeCheckCollision()) {
        snakeKill();
    } else {
        snakeCurrentDirection = snakeNextDirection;
        snakeLast = (snakeStart + snakeParts.length - 1) % snakeParts.length;
        elementMove(
            snakeParts[snakeLast],
            snakeParts[snakeStart].offsetLeft + DIRECTIONAL_OFFSET[snakeCurrentDirection].x * screenEM,
            snakeParts[snakeStart].offsetTop + DIRECTIONAL_OFFSET[snakeCurrentDirection].y * screenEM,
        );
        snakeStart = snakeLast;

        for (const collectable of snakeCollectables) {
            if (snakeParts[snakeStart].offsetLeft === collectable.offsetLeft &&
                snakeParts[snakeStart].offsetTop === collectable.offsetTop) {
                    snakeAdd();
                    elementMove(
                        collectable,
                        playingOriginX + (Math.floor(Math.random() * playingWidth / screenEM)) * screenEM,
                        playingOriginY + (Math.floor(Math.random() * playingHeight / screenEM)) * screenEM,
                    );
                }
        }

        updateTaskId = setTimeout(() => { requestAnimationFrame(updateLoop); }, 200);
    }
};


// ------
// Start
// ------

initialize();
        </script>
    </body>
</html>
